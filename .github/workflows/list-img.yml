# @format

name: List Images in JSON
on:
    push:
        paths:
            - "img/**"
    workflow_dispatch:
jobs:
    convert:
        runs-on: ubuntu-latest
        steps:
            - name: æª¢å‡ºåŸå§‹ç¢¼
              uses: actions/checkout@v2
            - name: è¨­å®š Node.js
              uses: actions/setup-node@v2
              with:
                  node-version: "20.10.0"
            - name: Install cwebp
              run: sudo apt update && sudo apt install -y webp
            - name: Run WebP Conversion Script
              run: |
                  chmod +x ./webp-convert-directory.sh
                  ./webp-convert-directory.sh
            - name: åˆ—å‡ºåœ–ç‰‡
              run: node ./list-img.js
            - name: æäº¤è®Šæ›´
              run: |
                  git config --local user.email "action@github.com"
                  git config --local user.name "GitHub Action"
                  git add .
                  if git diff --staged --quiet; then
                    echo "No changes"
                  else
                    git commit -m "ğŸ–¼ï¸æ›´æ–°åœ–ç‰‡åˆ—è¡¨"
                    git push
                  fi
                  
                  chmod +x ./webp-convert-directory.sh
                  ./webp-convert-directory.sh
            - name: åˆ—å‡ºåœ–ç‰‡
              run: node ./list-img.js
            - name: æäº¤è®Šæ›´
              run: |
                  git config --local user.email "action@github.com"
                  git config --local user.name "GitHub Action"
                  git add .
                  if git diff --staged --quiet; then
                    echo "No changes"
                  else
                    git commit -m "ğŸ–¼ï¸æ›´æ–°åœ–ç‰‡åˆ—è¡¨"
                    git push
                  fi
